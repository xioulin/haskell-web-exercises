<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>First Mapbox Map</title>


  <!-- Mapbox CSS -->
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
  <!-- Custom CSS -->
  <style>
    #map {
      /* the width and height may be set to any size */
      width: 100%;
      height: 700px;
    }
  </style>
</head>
<body>

<h1>My First Mapbox Map!</h1>
<button type="'button" id="btn1">CLick here for zoom level 5</button>
<!-- The HTML element that serves as the Mapbox container -->
<div id='map'></div>
<!-- Mapbox JS -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<script src="../.idea/keys.js"></script>
<!-- Custom JS -->
<script src="../js/mapbox-geocoder-utils.js"></script>

<script>
  mapboxgl.accessToken = MAPBOX_TOKEN
  // const map = new mapboxgl.Map({
  //     container: 'map', // container ID
  //     style: 'mapbox://styles/mapbox/streets-v11', // style URL
  //     center: [21.212, 52.1477], // starting position [lng, lat]
  //     zoom: 14, // starting zoom
  //     projection: 'globe' // display the map as a 3D globe
  // });
  //
  // console.log(map.getCenter());
  // // map.on('style.load', () => {
  // //     map.setFog({}); // Set the default atmosphere style
  // // });


  mapboxgl.accessToken = MAPBOX_TOKEN;
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    zoom: 10,
    center: [21.21, 52.14]
  });


  geocode("tilted kilt, killeen, TX 76543", MAPBOX_TOKEN).then(function(result) {
      console.log(result);
      map.setCenter(result);
      map.setZoom(13);
    var marker = new mapboxgl.Marker()
        .setLngLat(result)
        .addTo(map)
    var popup = new mapboxgl.Popup()
        .setLngLat(result)
        .setHTML("<p>Tilted Kilt</p>")
        .addTo(map)
  });

 map.on('click', (e) => {
    map.setZoom(5);
  });
  map.on('dblclick', (e) => {
   map.setZoom(10);
  });

 var restaurants = [
   {
     name: 'ihop'
     address: 'killeen, tx, 76543'
   }
   {
     name: 'dennys'
     address: 'killeen, tx, 76543'
   }
   {
     name: 'pizza hut'
     address: 'killeen, tx, 76543'
   }
 ];

 restaurants.forEach(geocode(name))


  // reverseGeocode({lng: -97.71765, lat: 31.09288}, MAPBOX_TOKEN).then(function(result) {
  //   console.log(result);
  //   map.setCenter([-97.71765, 31.09288]);
  //   map.setZoom(15);
  // });

</script>
</body>
</html>